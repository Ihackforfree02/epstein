<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Button Quest</title>
<style>
  body {
    margin: 0;
    background: #020617;
    color: white;
    font-family: monospace;
    text-align: center;
  }

  canvas {
    margin-top: 20px;
    background: black;
    border: 3px solid white;
  }
</style>
</head>
<body>

<h2>* The arena closes in.</h2>
<p>* Survive.</p>

<canvas id="c" width="400" height="300"></canvas>

<script>
  const c = document.getElementById("c");
  const ctx = c.getContext("2d");

  let player = { x: 190, y: 140, r: 6 };
  let bullets = [];
  let frames = 0;

  document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") player.x -= 6;
    if (e.key === "ArrowRight") player.x += 6;
    if (e.key === "ArrowUp") player.y -= 6;
    if (e.key === "ArrowDown") player.y += 6;
  });

  function spawn() {
    bullets.push({
      x: Math.random() * 400,
      y: -10,
      vy: 3 + Math.random() * 2
    });
  }

  function loop() {
    ctx.clearRect(0,0,400,300);

    // player (soul)
    ctx.fillStyle = "lime";
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.r, 0, Math.PI * 2);
    ctx.fill();

    // bullets
    ctx.fillStyle = "red";
    bullets.forEach(b => {
      b.y += b.vy;
      ctx.fillRect(b.x, b.y, 8, 8);

      const dx = b.x - player.x;
      const dy = b.y - player.y;
      if (Math.sqrt(dx*dx + dy*dy) < 10) {
        alert("* You failed.");
        location.reload();
      }
    });

    if (frames % 20 === 0) spawn();
    frames++;

    if (frames > 900) {
      localStorage.setItem("survived", "YES");
      location.href = "index3.html";
      return;
    }

    requestAnimationFrame(loop);
  }

  loop();
</script>

</body>
</html>
